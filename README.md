# Kong Demo: try_test-cor-plu-for

## üèóÔ∏è Multi-Service Architecture

This demo includes **2 services**:

- üîß **booking-service**: Available at `booking-service/openapi.yaml`
- üîß **notification-service**: Available at `notification-service/openapi.yaml`


## üöÄ Build Pipelines

### Multi-Service Pipeline
- **File**: `.github/workflows/build-multi-service.yml`
- **Purpose**: Builds all services together and creates a unified Kong configuration
- **Output**: `platform/kong/.generated/kong.yaml` (combined configuration)

### Individual Service Pipelines (Backup)
- **booking-service**: `.github/workflows/build-booking-service.yml`
- **notification-service**: `.github/workflows/build-notification-service.yml`



## üîß Plugin Configuration

### Global Plugins
- Location: `kong/plugins/*.yaml`
- Applied to: **All services**

### Service-Specific Plugins
- **booking-service**: `booking-service/kong/plugins/*.yaml`
  - If no specific plugins: `empty-plugins.yaml` with `plugins: []`
- **notification-service**: `notification-service/kong/plugins/*.yaml`
  - If no specific plugins: `empty-plugins.yaml` with `plugins: []`


### Empty Plugin Handling
Services without specific plugins get an `empty-plugins.yaml` file:
```yaml
plugins: []
```

## üë• Consumer Configuration

- Location: `kong/consumers/*.yaml`
- Scope: **Global** (available to all services)

## üîÑ Workflow Process

### Multi-Service Build Process:
1. **Change Detection**: Monitors all service specs and configurations
2. **Individual Conversion**: Converts each service's OpenAPI ‚Üí Kong config
3. **Plugin Processing**:
   - Merges actual plugin files (ignores `empty-plugins.yaml`)
   - Services with only `empty-plugins.yaml` get no service-specific plugins
4. **Global Merging**: Combines all services + global plugins/consumers
5. **Final Generation**: Creates unified `platform/kong/.generated/kong.yaml`
6. **Validation**: Validates the final Kong configuration
7. **PR Creation**: Creates pull request with changes

### Triggered by changes to:
- `booking-service/openapi.yaml`
- `booking-service/kong/**`
- `notification-service/openapi.yaml`
- `notification-service/kong/**`
- `kong/plugins/**` (global plugins)
- `kong/consumers/**` (global consumers)

## üè∑Ô∏è Tags

- **Demo-wide tag**: `try_test-cor-plu-for`
- **Service tags**:
- `booking-service`
- `notification-service`


---

*This demo was generated by Kong Demo Generator.